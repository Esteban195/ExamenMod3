pipeline {
    agent any
    stages{
    stage('Newman Tests') {
        steps {
            sh '''
            cd api/newman
            newman run ExamenModulo3.json -e ExamenMod3.json
            '''
        }
    }
    stage('RessAsured Tests') {
        steps {
            sh '''
            cd api/restassure
            mvn clean test
            '''
        }
    }
    stage('JMeter Tests') {
        steps {
            sh '''
            ls
            export PATH=/home/pjcalvov/jmeter/apache-jmeter-5.3/bin:$PATH
            cd load
            jmeter -n -t ExamenU.jmx
            '''
        }
    }
    }
post{
    always {
            mail to: 'edgaresteban.arias.castro@ucreativa.com',
            subject: "Se completo el pipeline: ${currentBuild.fullDisplayName}",
            body: "Se ha terminado la compilaci√≥n, porfavor revisa: ${env.BUILD_URL}"
            }
    }  
}